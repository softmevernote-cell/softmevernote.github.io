/*! * baguetteBox.js * @author feimosi * @version 1.11.1 * @url https://github.com/feimosi/baguetteBox.js */ !function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){"use strict";var r,l,u,c,d,f='',g='',p='',b={},v={captions:!0,buttons:"auto",fullScreen:!1,noScrollbars:!1,bodyClass:"baguetteBox-open",titleTag:!1,async:!1,preload:2,animation:"slideIn",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:"rgba(0,0,0,.8)"},m={},h=[],o=0,n=!1,i={},a=!1,y=/.+\.(gif|jpe?g|png|webp)/i,w={},k=[],s=null,x=function(e){-1!==e.target.id.indexOf("baguette-img")&&j()},E=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,D()},C=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,X()},B=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,j()},T=function(e){i.count++,1<i.count&&(i.multitouch=!0),i.startX=e.changedTouches[0].pageX,i.startY=e.changedTouches[0].pageY},P=function(e){if(!a&&!i.multitouch){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.touches[0]||e.changedTouches[0];20<t.pageX-i.startX?(a=!0,D()):t.pageX-i.startX<-20?(a=!0,X()):100<i.startY-t.pageY&&B()}},A=function(){i.count--,i.count<=0&&(i.multitouch=!1),a=!1},L=function(){a=!1},S=function(e){"Escape"===e.key&&(e.preventDefault(),j())};function I(e){var t=e.length;if(0===t)throw new Error("No images found for this gallery");h.innerHTML="";for(var n,o=w.noScrollbars?document.documentElement.scrollHeight:document.body.scrollHeight,r=document.body,l=0;l<t;l++)(n=J("div")).className="full-image",n.id="baguette-img-"+l,n.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',h.appendChild(n);r.classList.add(b.bodyClass),b.noScrollbars&&(r.style.overflow="hidden",r.style.height=o+"px"),U(G("baguetteBox-overlay"),"click",x),U(c,"click",E),U(d,"click",C),U(g,"click",B),U(h,"touchstart",T),U(h,"touchmove",P),U(h,"touchend",A),U(document,"keydown",S)}function N(e){if(y.test(e)){var t=G("baguette-img-"+o);if(t){if(t.getElementsByTagName("img").length)return;k[o]=e;var n=document.querySelector("#baguetteBox-gallery-"+p+" [data-baguettebox-image-id=\""+e+"\"]"),r=n.href,l=J("figure"),a=n.dataset.caption,s=n.dataset.title;l.id="baguette-img-figure-"+o,l.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',b.captions&&a&&s?l.innerHTML+='<figcaption id="baguetteBox-figcaption-"+o+"'">"+"string"==typeof b.captions?b.captions(n):a+"</figcaption>":b.captions&&a?l.innerHTML+='<figcaption id="baguetteBox-figcaption-"+o+"'">"+"string"==typeof b.captions?b.captions(n):a+"</figcaption>":b.captions&&s&&(l.innerHTML+='<figcaption id="baguetteBox-figcaption-"+o+"'">"+"string"==typeof b.captions?b.captions(n):s+"</figcaption>"),t.appendChild(l);var u=J("img");u.onload=function(){var e=document.querySelector("#baguette-img-"+o+" .baguetteBox-spinner");l.removeChild(e),!b.async&&n&&n()},u.setAttribute("src",r),u.alt=a||"",b.titleTag&&s&&(u.title=s),l.appendChild(u),b.async&&n&&n()}}}function j(){W(G("baguetteBox-overlay"),"click",x),W(c,"click",E),W(d,"click",C),W(g,"click",B),W(h,"touchstart",T),W(h,"touchmove",P),W(h,"touchend",A),W(document,"keydown",S);var e=document.body;e.classList.remove(b.bodyClass),b.noScrollbars&&(e.style.overflow="auto",e.style.height="auto"),W(document,"keydown",S),G("baguetteBox-overlay").style.display="none","function"==typeof b.afterHide&&b.afterHide()}function q(t,e){var n=h.children[t];if(void 0!==n&&n){if(n.getElementsByTagName("img").length)return void(e&&e());var o=k[t];N(o),setTimeout(function(){e&&e()},1e3)}}function X(){return M(o+1)}function D(){return M(o-1)}function M(e,t){return!n&&0<=e&&e<k.length?(q(o=e,function(){z(o),V(o)}),R(),b.onChange&&b.onChange(o,k.length),!0):(b.animation&&O(0<e?"right":"left"),!1)}function O(e){l.className="bounce-from-"+e,setTimeout(function(){l.className=""},400)}function R(){var e=100*-o+"%";"fadeIn"===b.animation?(l.style.opacity=0,setTimeout(function(){m.transforms?l.style.transform=l.style.webkitTransform="translate3d("+e+",0,0)":l.style.left=e,l.style.opacity=1},400)):m.transforms?l.style.transform=l.style.webkitTransform="translate3d("+e+",0,0)":l.style.left=e}function z(e){e-o>=b.preload||q(e+1,function(){z(e+1)})}function V(e){o-e>=b.preload||q(e-1,function(){V(e-1)})}function U(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,function(e){(e=e||window.event).target=e.target||e.srcElement,n(e)})}function W(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent("on"+t,n)}function G(e){return document.getElementById(e)}function J(e){return document.createElement(e)}return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,o,r){for(n=this,o=[],r=0;r<n.length;r++)e.call(t,n[r],r,n)&&o.push(n[r]);return o}),{run:function(e,t){return b=function(e){for(var t in e)v.hasOwnProperty(t)&&(v[t]=e[t]);return v}(t),m.transforms=function(){var e=J("div");return"undefined"!=typeof e.style.perspective||e.style.webkitPerspective}(),m.svg=function(){var e=J("div");return e.innerHTML="<svg/>","SVG"==(e.firstChild&&e.firstChild.namespaceURI).toUpperCase()}(),m.passiveEvents=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),function(e){if(w[e])return w[e].galleries;var t=document.querySelectorAll(e);return w[e]={galleries:[],valid:!1},0!==t.length&&(w[e].galleries=Array.prototype.slice.call(t).filter(function(e){return y.test(e.href)})),0<w[e].galleries.length&&(w[e].valid=!0,w[e].galleries.forEach(function(t,n){var o=J("div");o.id="baguetteBox-gallery-"+n,o.className="baguetteBox-gallery",o.dataset.baguetteboxGalleryId=n,t.dataset.baguetteboxImageId=t.href,t.parentNode.insertBefore(o,t),o.appendChild(t)})),w[e].galleries}(e)},show:function(e,t){if(n)return!1;if(o=e,t){if(!(t instanceof Array))throw new Error("options.images should be an array");if(t.length<1)throw new Error("options.images array should not be empty");k=t}else{var i=document.querySelectorAll(f);k=Array.prototype.slice.call(i).filter(function(e){return y.test(e.href)})}return 0<k.length&&o<k.length&&(I(k),q(o,function(){z(o),V(o)}),R(),"function"==typeof b.afterShow&&b.afterShow(),!0)},showNext:X,showPrevious:D,hide:j,destroy:function(){!function(){if(n)return!1;for(var e in j(),w)w.hasOwnProperty(e)&&w[e].valid&&w[e].galleries.forEach(function(e){e.parentNode.removeChild(e.parentNode)});w={}}()}}});