## 데이터 컬렉팅 파이선 프로그램 생성
- collect_file_info.py
- 아규먼트로 폴더명을 여러개 받아서 -> "문서폴더1" ""문서폴더2" ... "문서폴더N"
- "문서폴더1" 하위 폴더에 있는 html을 html 파일명을 읽어 -> "html파일명" 
    - 확장자 제거 -> "html파일명만"
"html파일명만" + " files" 디렉토리 하위의 파일목록을 - "html파일의첨부파일들"

### files.json 생성
- json 구조
```
[
{
    "html_file": "문서폴더1/html파일명",
    "folder": "문서폴더1",
    "files": [ 
        ...html파일의첨부파일들
    ],
    "html_file": "문서폴더2/html파일명",
    "folder": "문서폴더2",
    "files": [ 
        ...html파일의첨부파일들
    ]
   .
   .
   .
}
]
```

## 데이터 전처리 파이선 프로그램 생성
### files_info.json를 기반
  - 구분자로 단어 키워드로 생성
    - 파일명(html_file)
    - 파일(html_file + ".html")의 내용 : 텍스트 노드(innerText) 만 추출
      - text_cache 생성시에도 텍스트 노드(innerText) 만 추출
      - HTML 특수 문자 표현 엔티티(entity), &nbsp; &quot; &lt; 제외
      - <style> en-note.peso,en-note.peso 태그로 시작하는 부분 제외
    - 첨부파일(files)의 내용
    - 첨부파일만 전처리할 수 있는 옵션
    - 출력 : 옵션 지정
      - 파일명(html_file) : content_index_for_name.json 
      - 파일(html_file + ".html")의 내용 : content_index_for_html.json 
      - 첨부파일(files)의 내용 : content_index_for_attach.json 
    - 옵션
      --emit : name 
        - 속성 포함
          - tags, subtags
          - date
          - source

      --emit : html 
        - 속성 포함
          - summary_html 

      --emit : attach 
        - summary_file 
        - attachments[]

### content_index_for_name.json
[
  { "html_file": "내 노트 (24)/Erwin macro manual",
    "folder": "내 노트 (24)",
    "keywords_name": ["erwin", "macro", "manual"]
  }
]

###  content_index_for_html.json
[
  { "html_file": "내 노트 (24)/Erwin macro manual",
    "folder": "내 노트 (24)",
    "keywords_html": ["erwin", "pdf", "schema"]
  }
]

### content_index_for_attach.json
[
  { "html_file": "내 노트 (24)/Erwin macro manual",
    "folder": "내 노트 (24)",
    "keywords_attach": ["macro", "schema", "guide"]
  }
]

--emit : name 
  - text_cache
    - html에대한 캐쉬파일 생성(이미 있으면 삭제하고 재생성)
  - 속성
    - html_file
    - folder
    - keywords_name
    - summary_name 
    - tags, subtags
    - date
    - source
    - html_text_ref

--emit : html 
  - text_cache
    - html에대한 캐쉬파일 생성(이미 있으면 생성안함)
  - 속성
    - html_file
    - folder
    - keywords_html
    - summary_html 
    - tags, subtags
    - date
    - source
    - html_text_ref

--emit : attach 
  - text_cache
    - html에대한 캐쉬파일 생성(이미 있으면 생성안함)
    - 첨부파일에대한 캐쉬파일 생성(이미 있으면 삭제하고 재생성)
  - 속성
    - html_file
    - folder
    - keywords_attach
    - summary_file 
    - attachments[]
    - tags, subtags
    - date
    - source
    - html_text_ref

### content_index.json 생성
- json 구조
```
[
  {
    "html_file": "meeting_notes_2024.html",
    "folder": "data/2024/",
    "date": "2024-09-15",
    "tags": ["회의록", "프로젝트A"],
    "subtags": ["기획", "EWS"],
    "summary": "EWS 동기화 설계 논의 내용",
    "keywords_name": ["meeting", "EWS", "sync", "design"],
    "keywords_html": ["메일", "일정", "AD 연동", "MongoDB"],
    "keywords_attach": ["schema", "log", "exception", "trace"],
    "keywords_combined": ["meeting", "EWS", "sync", "MongoDB", "schema", "log", "exception"],
    "attachments": [
      {
        "filename": "EWS_sync_schema.pdf",
        "type": "pdf",
        "keywords": ["schema", "mail", "schedule"],
        "text_ref": "text_cache/EWS_sync_schema.txt"
      }
    ],
    "html_text_ref": "text_cache/meeting_notes_2024.txt",
    "source": {
      "html_path": "data/2024/meeting_notes_2024.html",
      "files_dir": "data/2024/files/"
    }
  },
  ...
]
```
## 데이터 전처리 파이선 프로그램 생성 - 파일합치기
- 합치기 : merge_content_parts.py
  - content_index_for_name.json + content_index_for_html.json + content_index_for_attach.json = content_index.json 
  - json별 우선순위
    1. content_index_for_name.json
    2. content_index_for_html.json
    3. content_index_for_attach.json
  - merge_content_parts.py 옵션 수정
    --name  기본값 ./data/content_index_for_name.json
    --html  기본값  ./data/content_index_for_html.json
    --attach 기본값 ./data/content_index_for_attach.json	
    --out 기본값 ./data/content_index.json	