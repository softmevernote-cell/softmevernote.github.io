# π“„ collect_file_info.py
**Evernote HTML λ‚΄λ³΄λ‚΄κΈ° κµ¬μ΅°λ¥Ό μ½μ–΄ `files_info.json` μƒμ„±**

---

## 1) λ¬΄μ—‡μ„ ν•λ” μ¤ν¬λ¦½νΈμΈκ°€
- μ§€μ •ν• **κΈ°μ¤€ λ””λ ‰ν„°λ¦¬**(`--base`, μ: `../`) μ•„λμ—μ„
- ν• κ° μ΄μƒ **λ¬Έμ„ ν΄λ”**(μ™€μΌλ“μΉ΄λ“ μ§€μ›, μ: `"λ‚΄ λ…ΈνΈ*"` )λ¥Ό μ°Ύμ•„
- κ° ν΄λ” λ‚΄μ **.html νμΌ**μ„ μ¤μΊ”ν•κ³ 
- κ°™μ€ μ΄λ¦„μ `"<htmlνμΌλ…> files/"` λ””λ ‰ν† λ¦¬ μ• **μ²¨λ¶€νμΌ λ©λ΅**μ„ μμ§‘ν•΄
- λ‹¤μ ν•νƒμ **`files_info.json`**μ„ λ§λ“ λ‹¤.

```json
[
  {
    "html_file": "λ‚΄ λ…ΈνΈ (24)/Erwin macro manual",
    "folder": "λ‚΄ λ…ΈνΈ (24)",
    "files": ["ERwin_Macro_Code.pdf", "thumb.png"]
  },
  ...
]
```
> `html_file` κ°’μ€ **ν™•μ¥μ(.html) μ—†μ΄** `ν΄λ”/νμΌλ…` ν•νƒλ‹¤.

---

## 2) μ‹¤ν–‰λ²• (μμ‹μ™€ λ‹¨κ³„)
### A. κΈ°λ³Έ
```bash
python3 collect_file_info.py "λ‚΄ λ…ΈνΈ (24)" --out ./files_info.json --base ../
```

### B. μ—¬λ¬ ν΄λ” ν• λ²μ— (μ¤νμ΄μ¤λ΅ κµ¬λ¶„)
```bash
python3 collect_file_info.py "λ‚΄ λ…ΈνΈ (24)" "λ‚΄ λ…ΈνΈ (25)" --out ./files_info.json --base ../
```

### C. μ™€μΌλ“μΉ΄λ“ μ‚¬μ©
```bash
python3 collect_file_info.py "λ‚΄ λ…ΈνΈ*" --out ./files_info.json --base ../
```

### D. λ“λΌμ΄λ°(μƒμ„± μ „ λ―Έλ¦¬λ³΄κΈ°)
```bash
python3 collect_file_info.py "λ‚΄ λ…ΈνΈ*" --out ./files_info.json --base ../ --dry-run
```

---

## 3) μ£Όμ” μµμ…
| μµμ… | νƒ€μ…/κΈ°λ³Έκ°’ | μ„¤λ… |
|---|---|---|
| `--out` | κ²½λ΅ / `./files_info.json` | κ²°κ³Ό JSON μ €μ¥ κ²½λ΅ |
| `--base` | κ²½λ΅ / `.` | λ¬Έμ„ν΄λ”λ“¤μ΄ μ„μΉν• **κΈ°μ¤€ λ””λ ‰ν† λ¦¬** |
| `--encoding` | λ¬Έμμ—΄ / `utf-8` | νμΌλ…Β·κ²½λ΅ μ½κΈ° κΈ°λ³Έ μΈμ½”λ”© |
| `--include-hidden` | bool / `false` | μ¨κΉ€ ν΄λ”/νμΌ ν¬ν•¨ μ—¬λ¶€ |
| `--dry-run` | flag | μ‹¤μ  νμΌ μ €μ¥ μ—†μ΄ μ½μ†”λ΅ μ”μ•½ μ¶λ ¥ |
| `--follow-symlinks` | bool / `false` | μ‹¬λ³Όλ¦­ λ§ν¬ μ¶”μ  μ—¬λ¶€ |

> κµ¬ν„μ— λ”°λΌ μµμ… μ΄λ¦„μ΄ μ•½κ°„ λ‹¤λ¥Ό μ μλ‹¤. κΈ°λ³Έμ μΌλ΅ **ν΄λ” μΈμ(μ„μΉ μΈμ)**μ—λ” `"λ‚΄ λ…ΈνΈ*"`, `"λ¬Έμ„ν΄λ”1"` κ°™μ΄ **μ—¬λ¬ κ°**λ¥Ό μ „λ‹¬ν•  μ μλ‹¤.

---

## 4) μ¤μΊ” κ·μΉ™ (Step-by-step)
1. **κΈ°μ¤€ λ””λ ‰ν„°λ¦¬**λ΅ μ΄λ™: `--base` κΈ°μ¤€ κ²½λ΅λ¥Ό μ΅λ”λ‹¤.  
2. **μ™€μΌλ“μΉ΄λ“ ν™•μ¥**: μ‰ κΈ€λ΅λΉ™ λλ” Python `glob`λ΅ `"λ‚΄ λ…ΈνΈ*"` κ°™μ€ ν¨ν„΄μ„ **μ‹¤μ  ν΄λ” λ©λ΅**μΌλ΅ ν™•μ¥.  
3. κ° **λ¬Έμ„ ν΄λ”**μ—μ„ **λ¨λ“  .html νμΌ** νƒμƒ‰(μ¬κ·€ ν¬ν•¨ κ°€λ¥).  
4. κ° HTMLμ— λ€ν•΄ **ν™•μ¥μ μ κ±°ν• νμΌλ…**μ„ μ–»κ³ , **λ™μΌ μ΄λ¦„μ μ²¨λ¶€ λ””λ ‰ν† λ¦¬** `"<stem> files/"`λ¥Ό ν™•μΈ.  
5. μ²¨λ¶€ λ””λ ‰ν† λ¦¬κ°€ μμΌλ©΄ λ‚΄λ¶€ νμΌλ…μ„ **μƒλ€κ²½λ΅ μ—†μ΄ νμΌλ…λ§** μμ§‘.  
6. `{"html_file": "ν΄λ”/νμΌλ…", "folder": "ν΄λ”", "files": [...]}` λ μ½”λ“λ¥Ό κ²°κ³Ό λ°°μ—΄μ— μ¶”κ°€.  
7. μµμΆ…μ μΌλ΅ λ°°μ—΄μ„ **ν΄λ”/νμΌλ… κΈ°μ¤€ μ •λ ¬** ν›„ `--out` κ²½λ΅μ— μ €μ¥.

---

## 5) ν•κΈ€(μ΅°ν•©ν•/λ¶„λ¦¬ν•) νμΌλ… λ€μ‘
- macOSμ—μ„ ν”ν• **λ¶„λ¦¬ν•(NFD)** κ³Ό **μ΅°ν•©ν•(NFC)** νΌμ¬ λ¬Έμ λ¥Ό ν”Όν•λ ¤κ³ ,
  λ‚΄λ¶€μ μΌλ΅ κ²½λ΅μ™€ νμΌλ…μ„ **NFC μ •κ·ν™”**ν•μ—¬ μ²λ¦¬ν•λ‹¤.  
- λ”°λΌμ„ `"λ‚΄ λ…ΈνΈ"`μ²λΌ ν•κΈ€ ν΄λ”/νμΌλ…μ΄ **μ΅°ν•©ν•/λ¶„λ¦¬ν• μ–΄λ””λ“  μ•μ „**ν•κ² λ™μ‘ν•λ‹¤.

---

## 6) μμ‹ μ…Β·μ¶λ ¥

### μ…λ ¥ λ””λ ‰ν† λ¦¬ κµ¬μ΅°
```
../
 β””β”€ λ‚΄ λ…ΈνΈ (24)/
     β”β”€ Erwin macro manual.html
     β””β”€ Erwin macro manual files/
         β”β”€ ERwin_Macro_Code.pdf
         β””β”€ thumb.png
```

### μ¶λ ¥ `files_info.json`
```json
[
  {
    "html_file": "λ‚΄ λ…ΈνΈ (24)/Erwin macro manual",
    "folder": "λ‚΄ λ…ΈνΈ (24)",
    "files": ["ERwin_Macro_Code.pdf", "thumb.png"]
  }
]
```

---

## 7) μμ£Ό ν•λ” μ‹¤μ & ν•΄κ²°
- **No such file or directory**  
  β†’ ν„μ¬ μ„μΉ κΈ°μ¤€μ΄ μ•„λ‹λΌ **`--base`κ°€ μ¬λ°”λ¥Έμ§€** ν™•μΈ.  
  β†’ μ: μ €μ¥μ† λ£¨νΈμ—μ„ μ‹¤ν–‰ν•λ‹¤λ©΄ `--base ../` μ²λΌ μƒμ„ κ²½λ΅λ¥Ό μ •ν™•ν μ§€μ •.
- **μ™€μΌλ“μΉ΄λ“κ°€ ν™•μ¥λμ§€ μ•μ**  
  β†’ μ‰μ΄ μ•„λ‹ ν™κ²½(μ: Pythonμ—μ„ μ§μ ‘ λ¬Έμμ—΄)μ„ μ“Έ λ•λ” μ¤ν¬λ¦½νΈκ°€
  λ‚΄λ¶€μ μΌλ΅ `glob`ν•λ„λ΅ λμ–΄ μμ–΄μ•Ό ν•λ‹¤.  
- **μ²¨λ¶€ λ””λ ‰ν† λ¦¬ μ΄λ¦„ μ¤νƒμ**  
  β†’ Evernote κ·μΉ™μ€ μ •ν™•ν **`<htmlνμΌλ…> + " files"`**. κ³µλ°± ν¬ν•¨ μ—¬λ¶€ μ£Όμ.
- **μ¨κΉ€ νμΌμ΄ κ²°κ³Όμ— λ“¤μ–΄μ΄/μ• λ“¤μ–΄μ΄**  
  β†’ `--include-hidden` ν”λκ·Έ ν™•μΈ.

---

## 8) μ›ν¬ν”λ΅μ° μ—°κ³„
1. `collect_file_info.py` β†’ `files_info.json` μƒμ„±  
2. `build_content_index_v10_emit_parts.py`λ΅ name/html/attach ννΈ μΈλ±μ¤ μƒμ„±  
3. `merge_content_parts.py`λ΅ μµμΆ… `content_index.json` λ³‘ν•©  
4. `processing.html` / `dashboard.html`μ—μ„ μ‹κ°ν™”(κ²€μƒ‰/μ›λ“ν΄λΌμ°λ“/λ„¤νΈμ›ν¬/νƒ€μ„λΌμΈ)

---

## 9) λΉ λ¥Έ μ²΄ν¬λ¦¬μ¤νΈ
- [ ] `--base` μ¬λ°”λ¥Έκ°€?  
- [ ] μ™€μΌλ“μΉ΄λ“κ°€ μ›ν•λ” ν΄λ”λ“¤μ„ κ°€λ¦¬ν‚¤λ‚?  
- [ ] Evernote μ²¨λ¶€ ν΄λ”κ°€ `"<stem> files/"` ν•νƒμΈκ°€?  
- [ ] κ²°κ³Ό `files_info.json`μ—μ„ `html_file`μ— **ν™•μ¥μκ°€ μ κ±°**λμ—λ”κ°€?

---

## 10) μµμ† μ‹¤ν–‰ μμ‹(λ³µλ¶™μ©)
```bash
python3 collect_file_info.py "λ‚΄ λ…ΈνΈ*" \
  --out ./files_info.json \
  --base ../
```
